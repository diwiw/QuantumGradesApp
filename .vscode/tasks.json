{
    "version": "2.0.0",
    "tasks": [
        // ======================================================
        // CONFIGURE
        // ======================================================
        {
            "label": "Configure Debug (vcpkg)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--preset",
                "linux-debug"
            ],
            "group": "build"
        },
        {
            "label": "Configure Release (vcpkg)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--preset",
                "linux-release"
            ],
            "group": "build"
        },
        // ======================================================
        // ✅ DEBUG BUILDS — Demos
        // ======================================================
        {
            "label": "Build Debug All Demos (vcpkg)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "build-linux-debug",
                "--parallel",
                "--target",
                "backtest_demo",
                "logger_demo",
                "grades_demo"
            ],
            "dependsOn": [
                "Configure Debug (vcpkg)"
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "Build Debug Tests (vcpkg)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "build-linux-debug",
                "--target",
                "qga_tests",
                "--parallel"
            ],
            "dependsOn": [
                "Configure Debug (vcpkg)"
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "Run Debug Tests (vcpkg)",
            "type": "shell",
            "command": "ctest",
            "args": [
                "--preset",
                "test-linux-debug"
            ],
            "dependsOn": [
                "Build Debug Tests (vcpkg)"
            ],
            "group": "test"
        },
        {
            "label": "Build Debug E2E Tests (preset)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "build-linux-debug-e2e"
            ],
            "dependsOn": [
                "Configure Debug (vcpkg)"
            ],
            "group": "build",
            "problemMatcher": []
        },
        // ======================================================
        // ✅ RELEASE BUILDS
        // ======================================================
        {
            "label": "Build Release All Demos (vcpkg)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "build-linux-release",
                "--parallel",
                "--target",
                "backtest_demo",
                "logger_demo",
                "grades_demo"
            ],
            "dependsOn": [
                "Configure Release (vcpkg)"
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "Build Release Tests (vcpkg)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "build-linux-release",
                "--target",
                "qga_tests",
                "--parallel"
            ],
            "dependsOn": [
                "Configure Release (vcpkg)"
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "Run Release Tests (vcpkg)",
            "type": "shell",
            "command": "ctest",
            "args": [
                "--preset",
                "test-linux-release"
            ],
            "dependsOn": [
                "Build Release Tests (vcpkg)"
            ],
            "group": "test"
        },
        {
            "label": "Build Release E2E Tests (preset)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "build-linux-release-e2e"
            ],
            "dependsOn": [
                "Configure Release (vcpkg)"
            ],
            "group": "build",
            "problemMatcher": []
        },
        // ======================================================
        // ✅ QGA BUILDS 
        // ======================================================
        {
            "label": "Build Debug CLI App",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "build-linux-debug-cli",
                "--target",
                "qga_cli",
                "-j8"
            ],
            "dependsOn": [
                "Configure Debug (vcpkg)"
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "Build Release CLI App",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "build-linux-release-cli",
                "--target",
                "qga_cli",
                "-j8"
            ],
            "dependsOn": [
                "Configure Release (vcpkg)"
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ]
        },
        // ======================================================
        // CLEAN
        // ======================================================
        {
            "label": "Clean Build",
            "type": "shell",
            "command": "rm",
            "args": [
                "-rf",
                "build"
            ],
            "group": "build"
        }
    ]
}